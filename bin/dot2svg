#!/usr/bin/env python
import os
import sys
import subprocess

def dot2svg(filename):
  ofilename = os.path.splitext(filename)[0] + '.svg'
  args = ['dot', '-Tsvg', '-o%s' % ofilename, filename]
  p = subprocess.Popen(args,
                       stdout=subprocess.PIPE,
                       stderr=subprocess.PIPE,
                       stdin=None)
  stdout, stderr = p.communicate()
  if p.returncode != 0:
    print stderr
  return p.returncode

def main(args):
  for filename in args:
      if dot2svg(filename) != 0:
        return 1
  return 0

if __name__ == '__main__':
  sys.exit(main(sys.argv[1:]))